# APIæ¥å£æ–‡æ¡£

## ğŸ“¡ æ¥å£è¯´æ˜

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://ä½ çš„IP:8080/`
- **æ•°æ®æ ¼å¼**: JSON
- **è®¤è¯æ–¹å¼**: JWT Token

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "code": 200,        // çŠ¶æ€ç : 200æˆåŠŸ, å…¶ä»–å¤±è´¥
  "message": "æˆåŠŸ",   // æç¤ºä¿¡æ¯
  "data": {}          // è¿”å›æ•°æ®
}
```

---

## ğŸ” ç”¨æˆ·è®¤è¯æ¨¡å—

### ç”¨æˆ·ç™»å½•
**æ¥å£åœ°å€**: `POST /api/auth/login`

**è¯·æ±‚å‚æ•°**:
```json
{
  "phone": "13800138000",
  "password": "123456"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "user_id": 1,
      "username": "migaga_user",
      "phone": "13800138000",
      "nickname": "ç±³å˜å˜ç”¨æˆ·"
    }
  }
}
```

### ç”¨æˆ·æ³¨å†Œ
**æ¥å£åœ°å€**: `POST /api/auth/register`

**è¯·æ±‚å‚æ•°**:
```json
{
  "phone": "13800138000",
  "code": "123456",
  "password": "123456"
}
```

---

## ğŸ›ï¸ äº§å“æ¨¡å—

### è·å–äº§å“åˆ—è¡¨
**æ¥å£åœ°å€**: `GET /api/products`

**è¯·æ±‚å‚æ•°**:
```
Query:
  category_id=1     // åˆ†ç±»ID (å¯é€‰): 1-ç»å…¸å¤åˆ», 2-æ½®æµåˆ›å‘³
  page=1            // é¡µç ï¼Œé»˜è®¤1
  page_size=20      // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": [
    {
      "product_id": 1,
      "product_name": "ç»å…¸ç±³èŠ±ç³–",
      "category_id": 1,
      "price": 19.90,
      "original_price": 29.90,
      "stock": 100,
      "sales": 520,
      "description": "ä¼ ç»Ÿå·¥è‰ºï¼Œç»å…¸å£å‘³",
      "images": [
        "https://example.com/product1_1.jpg",
        "https://example.com/product1_2.jpg"
      ],
      "is_on_sale": true
    }
  ]
}
```

### è·å–äº§å“è¯¦æƒ…
**æ¥å£åœ°å€**: `GET /api/products/{id}`

### æœç´¢äº§å“
**æ¥å£åœ°å€**: `GET /api/products/search`

**è¯·æ±‚å‚æ•°**:
```
Query:
  keyword=ç±³èŠ±ç³–
  page=1
```

---

## ğŸ›’ è´­ç‰©è½¦æ¨¡å—

### æ·»åŠ åˆ°è´­ç‰©è½¦
**æ¥å£åœ°å€**: `POST /api/cart/add`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {token}
```

**è¯·æ±‚å‚æ•°**:
```json
{
  "product_id": 1,
  "quantity": 2
}
```

### è·å–è´­ç‰©è½¦åˆ—è¡¨
**æ¥å£åœ°å€**: `GET /api/cart/list`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": [
    {
      "product_id": 1,
      "product_name": "ç»å…¸ç±³èŠ±ç³–",
      "price": 19.90,
      "quantity": 2,
      "images": ["..."],
      "stock": 100,
      "selected": true
    }
  ]
}
```

### æ›´æ–°è´­ç‰©è½¦å•†å“
**æ¥å£åœ°å€**: `POST /api/cart/update`

**è¯·æ±‚å‚æ•°**:
```json
{
  "product_id": 1,
  "quantity": 3,
  "selected": true
}
```

### åˆ é™¤è´­ç‰©è½¦å•†å“
**æ¥å£åœ°å€**: `POST /api/cart/delete`

**è¯·æ±‚å‚æ•°**:
```
Query: product_id=1
```

---

## ğŸ“¦ è®¢å•æ¨¡å—

### åˆ›å»ºè®¢å•
**æ¥å£åœ°å€**: `POST /api/orders/create`

**è¯·æ±‚å‚æ•°**:
```json
{
  "address_id": 1,
  "items": [
    {
      "product_id": 1,
      "quantity": 2,
      "price": 19.90
    }
  ],
  "total_amount": 39.80,
  "remark": "å¤‡æ³¨ä¿¡æ¯"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "order_id": "202501011200001",
    "total_amount": 39.80,
    "status": 1,
    "create_time": "2025-01-01 12:00:00"
  }
}
```

### è·å–è®¢å•åˆ—è¡¨
**æ¥å£åœ°å€**: `GET /api/orders/list`

**è¯·æ±‚å‚æ•°**:
```
Query:
  status=1   // è®¢å•çŠ¶æ€ (å¯é€‰): 1-å¾…ä»˜æ¬¾, 2-å¾…å‘è´§, 3-å¾…æ”¶è´§, 4-å·²å®Œæˆ, 5-å·²å–æ¶ˆ
  page=1
```

### è·å–è®¢å•è¯¦æƒ…
**æ¥å£åœ°å€**: `GET /api/orders/{orderId}`

### å–æ¶ˆè®¢å•
**æ¥å£åœ°å€**: `POST /api/orders/cancel`

**è¯·æ±‚å‚æ•°**:
```
Query: order_id=202501011200001
```

---

## ğŸ“ åœ°å€ç®¡ç†æ¨¡å—

### è·å–åœ°å€åˆ—è¡¨
**æ¥å£åœ°å€**: `GET /api/address/list`

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "data": [
    {
      "address_id": 1,
      "user_id": 1,
      "receiver_name": "å¼ ä¸‰",
      "receiver_phone": "13800138000",
      "province": "å››å·çœ",
      "city": "ä¹å±±å¸‚",
      "district": "å¸‚ä¸­åŒº",
      "detail_address": "XXè¡—é“XXå·",
      "is_default": true
    }
  ]
}
```

### æ·»åŠ åœ°å€
**æ¥å£åœ°å€**: `POST /api/address/add`

**è¯·æ±‚å‚æ•°**:
```json
{
  "receiver_name": "å¼ ä¸‰",
  "receiver_phone": "13800138000",
  "province": "å››å·çœ",
  "city": "ä¹å±±å¸‚",
  "district": "å¸‚ä¸­åŒº",
  "detail_address": "XXè¡—é“XXå·",
  "is_default": false
}
```

### æ›´æ–°åœ°å€
**æ¥å£åœ°å€**: `POST /api/address/update`

### åˆ é™¤åœ°å€
**æ¥å£åœ°å€**: `POST /api/address/delete`

**è¯·æ±‚å‚æ•°**:
```
Query: address_id=1
```

### è®¾ç½®é»˜è®¤åœ°å€
**æ¥å£åœ°å€**: `POST /api/address/setDefault`

**è¯·æ±‚å‚æ•°**:
```
Query: address_id=1
```

---

## ğŸ†˜ é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 200 | æˆåŠŸ |
| 400 | å‚æ•°é”™è¯¯ |
| 401 | æœªç™»å½• |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |
| 1001 | æ‰‹æœºå·å·²æ³¨å†Œ |
| 1002 | éªŒè¯ç é”™è¯¯ |
| 1003 | éªŒè¯ç å·²è¿‡æœŸ |
| 1004 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ |
| 1005 | Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ |
| 2001 | äº§å“ä¸å­˜åœ¨ |
| 2002 | åº“å­˜ä¸è¶³ |
| 3001 | è®¢å•ä¸å­˜åœ¨ |
| 3002 | è®¢å•çŠ¶æ€å¼‚å¸¸ |

---

## ğŸ” å®‰å…¨å»ºè®®

1. **å¯†ç åŠ å¯†**: ä½¿ç”¨BCryptåŠ å¯†å­˜å‚¨
2. **Tokenè¿‡æœŸ**: JWT Tokenå»ºè®®7å¤©è¿‡æœŸ
3. **è¯·æ±‚é™æµ**: é˜²æ­¢æ¶æ„è¯·æ±‚
4. **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
5. **HTTPS**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPS

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-25  
**ç»´æŠ¤è€…**: ç±³å˜å˜å¼€å‘å›¢é˜Ÿ